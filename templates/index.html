<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI-Powered Restaurant Recommendation Engine</title>
    <link href="/static/style.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div class="hero">
            <h1>AI-Powered Restaurant Recommendation Engine</h1>
            <p class="tagline">Find your perfect dining spot with AI-driven insights!</p>
        </div>
        <form action="/recommend" method="post" class="form" id="recommend-form">
            <div class="form-group">
                <label for="stars">Star Rating (1.0-5.0)</label>
                <input type="number" step="0.1" min="1.0" max="5.0" name="stars" id="stars" placeholder="e.g. 2.5, 4.0, 3.5, 4.5, 3.0" required aria-describedby="stars-help">
                <small id="stars-help">Enter a star rating between 1.0 and 5.0.</small>
            </div>
            <div class="form-group">
                <label for="review_count">Minimum Review Count</label>
                <input type="number" min="0" name="review_count" id="review_count" placeholder="e.g. 128, 170, 184, 4" required aria-describedby="review-help">
                <small id="review-help">Enter the minimum number of reviews.</small>
            </div>
            <div class="form-group">
                <label for="categories">Category</label>
                <input type="text" name="categories" id="categories" placeholder="e.g. Sushi Bars, Italian, Dim Sum" aria-describedby="category-help">
                <small id="category-help">Enter a restaurant category.</small>
            </div>
            <div class="form-group">
                <label for="city">City</label>
                <input type="text" name="city" id="city" placeholder="e.g. Charlotte, Mississauga, Glendale, Fairview Park, Las Vegas" aria-describedby="city-help">
                <small id="city-help">Enter a city (optional).</small>
            </div>
            <div class="form-group">
                <label for="attributes">Attributes (comma-separated)</label>
                <input type="text" name="attributes" id="attributes" placeholder="e.g. GoodForKids, GoodForWifi, BusinessAcceptBitcoins" aria-describedby="attributes-help">
                <small id="attributes-help">Enter desired attributes, separated by commas.</small>
            </div>
            <button type="submit" id="submit-btn">Find Restaurants</button>
        </form>

        {% if city_warning %}
            <div class="warning">{{ city_warning }}</div>
        {% endif %}
        {% if message %}
            <div class="message">{{ message }}</div>
        {% endif %}

        {% if recommendations %}
            <h2>Recommended Restaurants</h2>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Address</th>
                            <th>City</th>
                            <th>Stars</th>
                            <th>Reviews</th>
                            <th>Categories</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for rec in recommendations %}
                            <tr>
                                <td>{{ rec.name|truncate(29) }}</td>
                                <td>{{ rec.address|truncate(39) }}</td>
                                <td>{{ rec.city }}</td>
                                <td>{{ rec.stars|floatformat(1) }}</td>
                                <td>{{ rec.review_count }}</td>
                                <td>{{ rec.categories|truncate(39) }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% endif %}
    </div>
    <script>
        // Add loading state to button
        document.getElementById('recommend-form').addEventListener('submit', function() {
            const btn = document.getElementById('submit-btn');
            btn.disabled = true;
            btn.textContent = 'Searching...';
        });
    </script>
</body>
</html>